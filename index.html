<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>MES-AI-A STAGE 1</title>

<style>
  body {
    margin:0;
    font-family: sans-serif;
    background:#c6ece7;
    display:flex;
    justify-content:center;
  }

  .frame {
    width:100%;
    max-width:420px;
    padding:20px;
  }

  .label {
    background:#220043;
    color:#fff;
    text-align:center;
    padding:12px;
    font-weight:bold;
    border-radius:20px 20px 0 0;
  }

  /* ---------- セラーIDプール ---------- */
  .pool {
    background:#fff;
    border:4px solid #220043;
    border-top:none;
    border-radius:0 0 20px 20px;
    padding:16px;
    display:flex;
    justify-content:center;
    gap:10px;
    flex-wrap:wrap;
  }

  .pill {
    background:#220043;
    color:#fff;
    border-radius:999px;
    padding:10px 28px;
    font-size:14px;
    font-weight:bold;
    white-space:nowrap;
    user-select:none;
    cursor:grab;
    touch-action:none;
  }

  /* ---------- 貼り付けエリア ---------- */
  .drop-zone {
    background:#fff;
    border:4px dashed #220043;
    border-top:none;
    border-radius:0 0 20px 20px;
    padding:14px;
    display:flex;
    gap:8px;
    justify-content:space-between;
    align-items:center;
  }

  .slot {
    background:#e2e3ec;
    border-radius:999px;
    height:36px;
    flex:1;
    display:flex;
    justify-content:center;
    align-items:center;
    min-width:0;
    padding:0 8px;
    font-size:12px;
    white-space:nowrap;
    overflow:hidden;
  }

  .slot.dragover {
    outline:2px solid #220043;
    background:#dcdcff;
  }

  /* スロット中のpillを自動縮小 */
  .slot .pill {
    padding:6px 14px;
    font-size:12px;
    max-width:100%;
    overflow:hidden;
    text-overflow:ellipsis;
  }
</style>
</head>

<body>
<div class="frame">

  <!-- セラーID -->
  <div class="label">セラーID</div>
  <div class="pool">
    <div class="pill" data-id="A1EXAMPLE2345">A1EXAMPLE2345</div>
    <div class="pill" data-id="B2EXAMPLE3456">B2EXAMPLE3456</div>
  </div>

  <!-- 貼り付け -->
  <div style="margin-top:20px">
    <div class="label">セラーID貼り付け</div>
    <div class="drop-zone">
      <div class="slot" data-slot>ここにドロップ</div>
      <div class="slot" data-slot>ここにドロップ</div>
      <div class="slot" data-slot>
        <div class="pill">AxxxxxB00</div>
      </div>
    </div>
  </div>

</div>

<script>
  let dragging = null;
  let clone = null;

  const pills = document.querySelectorAll('.pool .pill');
  const slots = document.querySelectorAll('[data-slot]');

  /* ✅ スマホ最適化ドラッグ */
  pills.forEach(pill => {
    pill.addEventListener('pointerdown', e => {
      dragging = pill;
      clone = pill.cloneNode(true);
      clone.style.position = 'fixed';
      clone.style.pointerEvents = 'none';
      clone.style.zIndex = '9999';
      document.body.appendChild(clone);
      moveClone(e);
    });
  });

  document.addEventListener('pointermove', e => {
    if (!clone) return;
    moveClone(e);

    slots.forEach(slot => {
      const rect = slot.getBoundingClientRect();
      if (
        e.clientX > rect.left && e.clientX < rect.right &&
        e.clientY > rect.top && e.clientY < rect.bottom
      ) {
        slot.classList.add('dragover');
      } else {
        slot.classList.remove('dragover');
      }
    });
  });

  document.addEventListener('pointerup', e => {
    if (!clone) return;

    slots.forEach(slot => {
      const rect = slot.getBoundingClientRect();
      if (
        e.clientX > rect.left && e.clientX < rect.right &&
        e.clientY > rect.top && e.clientY < rect.bottom
      ) {
        slot.innerHTML = '';
        const pill = dragging.cloneNode(true);
        pill.style.width = 'auto';
        slot.appendChild(pill);
      }
      slot.classList.remove('dragover');
    });

    clone.remove();
    clone = null;
    dragging = null;
  });

  function moveClone(e){
    clone.style.left = e.clientX - clone.offsetWidth / 2 + 'px';
    clone.style.top = e.clientY - clone.offsetHeight / 2 + 'px';
  }
</script>

</body>
</html>
